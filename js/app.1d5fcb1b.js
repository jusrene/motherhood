(function(){"use strict";var e={94:function(e,t,n){var o=n(5130),i=n(6768);const s={id:"app"};function r(e,t,n,o,r,a){const c=(0,i.g2)("ShopTour");return(0,i.uX)(),(0,i.CE)("div",s,[(0,i.bF)(c)])}const a=(0,i.Fv)('<div id="container"></div><div id="popup"><div class="close-btn"><img src="images/Mother_content_cross.png"></div><img src="images/Mother_content.jpg" alt="Popup Image" style="width:100%;"></div>',2);function c(e,t,n,o,i,s){return a}var l=n(144),h=n(8776),u=n(2951),p=n(9736),d=n(1353);let m,v;var g={name:"ShopTour",data(){return{isShowPopup:!1,popupContent:"You've clicked on the 3D object!",envMaps:[],currentEnvMapIndex:0,scene:(0,l.IG)(new h.Z58),renderer:null,controls:null,camera:null,raycaster:null,mouse:null,model1:null}},methods:{async initThreeJS(){const e=document.getElementById("container");this.camera=new h.ubm(100,window.innerWidth/window.innerHeight,.01,1e3),this.renderer=new h.JeP({antialias:!0}),this.renderer.setSize(e.offsetWidth,e.offsetHeight),e.appendChild(this.renderer.domElement),this.controls=new u.N(this.camera,this.renderer.domElement),this.camera.position.set(0,0,5);const t=new h.Pq0(0,0,0),n=-1*this.camera.position.distanceTo(t);this.camera.position.x=t.x-n,this.camera.position.z=t.z,this.camera.lookAt(t),this.controls.update(),await this.loadHDRBackgrounds(["room1.hdr","room2.hdr","room3.hdr"]);for(let o=0;o<2;o++)0!==o?1!==o||this.createFlashingArrow(this.scene,new h.Pq0(50,-20,-10)):this.createFlashingArrow(this.scene,new h.Pq0(-100,-20,10));this.addInteractiveObject(this.scene),this.raycaster=new h.tBo,this.mouse=new h.I9Y,this.animate()},onDocumentMouseDown(e){e.preventDefault(),this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const t=this.raycaster.intersectObjects(this.scene.children,!0);console.log("intersects.length : "+t.length);for(let n=0;n<t.length;n++){let e=t[n].object,o=5;console.log("intersects[i].object.isClickable : "+e.userData.isClickable);while(e&&!e.userData.isClickable&&o>0)console.log("object.parent : "+e.parent),console.log("tryObj : "+o),e=e.parent,o-=1;if(console.log("intersects[i].object.isClickable2 : "+e.userData.isClickable),e.userData.isClickable&&(e.userData.isArrow&&this.changeHDRBackground(n),e.userData.isInteractiveObject&&(console.log("3D object clicked"),this.isShowPopup=!0,this.showPopup()),e.userData.isInteractiveObjectGoToOtherRoom)){console.log("Image object clicked");let e=0;this.currentEnvMapIndex<2&&(e=this.currentEnvMapIndex+1),this.changeHDRBackground(e)}}},createFlashingArrow(e){const t=new h.G_z({color:9127187}),n=new h.iNn(3,.2,3),o=new h.eaF(n,t);o.userData={isClickable:!0,isArrow:!0},o.position.copy(e),this.scene.add(o)},async loadHDRBackgrounds(e){const t=new h.BdL(this.renderer);t.compileEquirectangularShader(),this.envMaps=[];const n=e.map((e=>new Promise(((t,n)=>{console.log(e),(new p.Y).setPath("images/").load(e,(function(e){e.mapping=h.wfO;const n=e;e.dispose(),t(n)}),void 0,n)}))));Promise.all(n).then((e=>{console.log("--------"),this.envMaps=e,console.log(this.envMaps),console.log(this.envMaps[0]),this.scene.background=this.envMaps[0],this.scene.environment=this.envMaps[0]})).finally((()=>{t.dispose()}))},changeHDRBackground(e){console.log("changeHDRBackground"),console.log("this.currentEnvMapIndex : "+this.currentEnvMapIndex),console.log("newIndex : "+e);const t=this.envMaps[this.currentEnvMapIndex],n=this.envMaps[e];let o=0;const i=()=>{o+=.05,o<=1?(this.scene.environment=h.cj9.lerp(t,n,o),requestAnimationFrame(i)):(console.log("Finished animation"),this.scene.background=n,this.scene.environment=n,this.currentEnvMapIndex=e)};if(0===e){m.position.set(-5,0,0),v.position.set(-5,-7,-.7),v.scale.set(2,1.5,2),this.camera.position.set(0,0,5);const e=new h.Pq0(0,0,0),t=-1*this.camera.position.distanceTo(e);this.camera.position.x=e.x-t,this.camera.position.z=e.z,this.camera.lookAt(e)}else if(1===e){m.position.set(30,0,0),v.position.set(15,-10,0),v.scale.set(2.3,1.8,2.3),this.camera.position.set(0,0,5);const e=new h.Pq0(0,0,0),t=this.camera.position.distanceTo(e);this.camera.position.x=e.x-t,this.camera.position.z=e.z}else if(2===e){m.position.set(10,0,0),v.position.set(15,-15,-.7),v.scale.set(3,2.3,3),this.camera.position.set(0,0,5);const e=new h.Pq0(0,0,0),t=-1*this.camera.position.distanceTo(e);this.camera.position.x=e.x-t,this.camera.position.z=e.z}requestAnimationFrame(i)},addInteractiveObject(){const e=new d.B;e.load("images/teapot.glb",(e=>{m=e.scene,m.position.set(-5,0,0),m.rotation.y=-1*Math.PI/2,m.scale.set(3,3,3),m.userData={isClickable:!0,isInteractiveObject:!0},this.scene.add(m)}),void 0,(function(e){console.error(e)}));const t=new h.Tap;t.load("images/Mother_arrow.png",(e=>{const t=new h.RoJ({map:e,transparent:!0});v=new h.kxk(t),v.scale.set(2,1.5,2),v.userData={isClickable:!0,isInteractiveObjectGoToOtherRoom:!0},v.position.set(-5,-7,-.7),this.scene.add(v)}),void 0,(function(e){console.error("An error occurred loading the arrow texture:",e)}))},showPopup(){document.getElementById("popup").style.display="block",document.querySelector(".close-btn").addEventListener("mousedown",(e=>{e.preventDefault(),e.stopPropagation(),document.getElementById("popup").style.display="none",this.isShowPopup=!1}))},animate(){if(requestAnimationFrame(this.animate),this.controls.update(),m){const e=.001*Date.now();m.position.y=Math.sin(e)}this.renderer.render(this.scene,this.camera)}},mounted(){this.initThreeJS(),document.addEventListener("mousedown",this.onDocumentMouseDown.bind(this))}},f=n(1241);const w=(0,f.A)(g,[["render",c]]);var b=w,k={name:"App",components:{ShopTour:b}};const y=(0,f.A)(k,[["render",r]]);var D=y;(0,o.Ef)(D).mount("#app")}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,o,i,s){if(!o){var r=1/0;for(h=0;h<e.length;h++){o=e[h][0],i=e[h][1],s=e[h][2];for(var a=!0,c=0;c<o.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(a=!1,s<r&&(r=s));if(a){e.splice(h--,1);var l=i();void 0!==l&&(t=l)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[o,i,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,s,r=o[0],a=o[1],c=o[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(c)var h=c(n)}for(t&&t(o);l<r.length;l++)s=r[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(h)},o=self["webpackChunkvirtual_tour"]=self["webpackChunkvirtual_tour"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(94)}));o=n.O(o)})();
//# sourceMappingURL=app.1d5fcb1b.js.map